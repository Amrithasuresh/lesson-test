---
source: Rmd
title: "Using RMarkdown"
teaching: 10
exercises: 2
questions:
- "How do I write a lesson using RMarkdown?"
objectives:
- "Explain how to use RMarkdown with the new lesson template."
- "Demonstrate how to include pieces of code, figures, and challenges."
keypoints:
- "Edit the .Rmd files not the .md files"
- "Run `make serve` to knit documents and preview lesson website locally"
---

```{r, include=FALSE}
source("../bin/chunk-options.R")
knitr_fig_path("05-")
```


This episode demonstrates all the features that can be used when writing a
lesson in [RMarkdown][r-markdown].

To generate the site, you will need to have the following packages installed:

```{r, eval=FALSE}
install.packages(c("knitr", "stringr", "checkpoint"))
```

If the lesson uses additional packages, the script that converts the Rmd files
into markdown, will detect them and install them for you, when you run `make
serve` or `make site`.

RMarkdown episode files should include an extra `source` field in the page
front matter, telling the lesson template to point to the RMarkdown file
in the source repository, instead of the knitted Markdown equivalent:

```
---
source: Rmd
title: Episode Title
[...]
```


Every episode written in RMarkdown must include the block below
at the beginning of the page body i.e. after the page front matter.

````r
```{r, include=FALSE}`r ''`
source("../bin/chunk-options.R")
knitr_fig_path("05-")
```
````

The first line ensures that the chunks
have the correct styling in the rendered website. The second line is optional
but allows you to ensure that figures that are generated by the lessons will
have the same prefix for each episode (you should use a different prefix for
each episode using the episode number for instance).

The rest of the lesson should be written as a normal RMarkdown file. You can
include chunks for codes, just like you would normally do.
Output of code chunks will be generated as part of the knitting process.

Normal output:

````
```{r}`r ''`
1 + 1
```
````

will be rendered as

```{r}
1 + 1
```

Output with error message:

````
```{r}`r ''`
x[10]
```
````

will be rendered as

```{r}
x[10]
```

Similarly, any figures generated by code chunks will be embedded below the chunk
in the page:

````
```{r plot-example}`r ''`
library(ggplot2)
ggplot(diamonds, aes(x = carat,  y = price, color = cut)) +
    geom_point()
```
````

will be rendered as

```{r plot-example}
library(ggplot2)
ggplot(diamonds, aes(x = carat,  y = price, color = cut)) +
    geom_point()
```

The value of the alternative text parameter for these embedded images will be
"plot of chunk \<chunk name\>"
i.e. "plot of chunk plot-example" for the example above.


```r
2 + 2
```

or

> ```r
> 2 + 4
> ```

```{r}
2 * 2
```

or

> ```{r}
> 2 * 4
> ```






For the challenges and their solutions, you need to pay attention to where the
`>` go and where to leave blank lines. You can include code chunks in both the
instructions and solutions. For instance this:

````
> ## Challenge: Can you do it?
>
> What is the output of this command?
>
> ```{r, eval=FALSE}`r ''`
> paste("This", "new", "template", "looks", "good")
> ```
>
> > ## Solution
> >
> > ```{r, echo=FALSE}`r ''`
> > paste("This", "new", "template", "looks", "good")
> > ```
> {: .solution}
{: .challenge}
````

will generate this:

> ## Challenge: Can you do it?
>
> What is the output of this command?
>
> ```{r, eval=FALSE}
> paste("This", "new", "template", "looks", "good")
> ```
>
> > ## Solution
> >
> > ```{r, echo=FALSE}
> > paste("This", "new", "template", "looks", "good")
> > ```
> {: .solution}
{: .challenge}

{% include links.md %}
